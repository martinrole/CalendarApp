(this.webpackJsonpcalendar=this.webpackJsonpcalendar||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(8),o=n(28),s=n(56),l=n(9),i=n.n(l),u=n(15),j=n(5),b="https://calendar-app-martin.herokuapp.com/api",d=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="".concat(b,"/").concat(t),"GET"!==a){e.next=5;break}return e.next=4,fetch(r);case 4:case 12:return e.abrupt("return",e.sent);case 5:return c={method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.prev=6,e.next=9,fetch(r,c);case 9:return o=e.sent,e.next=12,o.json();case 15:return e.prev=15,e.t0=e.catch(6),console.log("error en authFetch: ",e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t,n,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(t,n,a){var r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(b,"/").concat(t),c=localStorage.getItem("token")||"",o="GET"===a?{method:a,headers:{"x-token":c}}:{method:a,headers:{"Content-Type":"application/json","x-token":c},body:JSON.stringify(n)},e.prev=3,e.next=6,fetch(r,o);case 6:return s=e.sent,e.next=9,s.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(3),console.log("error en authFetchToken: ",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n,a){return e.apply(this,arguments)}}(),p=n(27),O=n.n(p),h=function(e,t,n){O.a.fire({icon:e,title:t,text:n})},v={checking:!0},f="[authDucks] Checking Finish",x="[authDucks] Login",g="[authDucks] Logout",y=n(45),N=n(12),k=n.n(N),C={allDay:"Todo el d\xeda",previous:"Atr\xe1s",next:"Siguiente",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{start:k()(e.start).toDate(),end:k()(e.end).toDate()})}))},S={events:[],activeEvent:null},D="[CalendarDucks] Add Event",E="[CalendarDucks] List Event",T="[CalendarDucks] Active Event",A="[CalendarDucks] Clear Active Event",I="[CalendarDucks] Updated Event",L="[CalendarDucks] Delete Event",M="[CalendarDucks] Clear All Calendar",P=function(){return{type:A}},F={modalOpen:!1},R="[uiDucks] Open Modal",_="[uiDucks] Close Modal",G=function(){return{type:R}},V=Object(o.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(j.a)(Object(j.a)({},e),{},{modalOpen:!0});case _:return Object(j.a)(Object(j.a)({},e),{},{modalOpen:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(j.a)(Object(j.a)({},e),{},{activeEvent:t.payload});case A:return Object(j.a)(Object(j.a)({},e),{},{activeEvent:null});case D:return Object(j.a)(Object(j.a)({},e),{},{events:[].concat(Object(y.a)(e.events),[t.payload])});case E:return Object(j.a)(Object(j.a)({},e),{},{events:Object(y.a)(t.payload)});case I:return Object(j.a)(Object(j.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case L:return Object(j.a)(Object(j.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.activeEvent.id})),activeEvent:null});case M:return Object(j.a)({},S);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)(Object(j.a)({},e),t.payload),{},{checking:!1});case f:return Object(j.a)(Object(j.a)({},e),{},{checking:!1});case g:return{checking:!1};default:return e}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,B=Object(o.d)(V,U(Object(o.a)(s.a))),H=n(0),J=n(21),X=n(6),q=n(2),z=function(){return Object(q.jsxs)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:[Object(q.jsx)("div",{className:"spinner-grow text-primary ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-secondary ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-success ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-danger ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-warning ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-info ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-light ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(q.jsx)("div",{className:"spinner-grow text-dark ml-3",role:"status",children:Object(q.jsx)("span",{className:"sr-only",children:"Loading..."})})]})},K=n(11),Q=(n(81),n(44)),W=(n(83),function(){var e=Object(c.c)((function(e){return e.auth})).nombre,t=Object(c.b)(),n=Object(X.g)();return Object(q.jsxs)("div",{className:"navbar navbar-dark bg-dark mb-4 px-3",children:[Object(q.jsx)("span",{className:"navbar-brand",children:e}),Object(q.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){n("/login",{replace:!0}),t((function(e,t){e({type:g}),localStorage.clear()})),t((function(e,t){e({type:M})}))},children:[Object(q.jsx)("span",{children:"Salir "}),Object(q.jsx)("i",{className:"fas fa-sign-out-alt"})]})]})});function Y(e){var t=e.event,n=t.title,a=t.usuario;return Object(q.jsxs)("div",{children:[Object(q.jsx)("strong",{children:n})," - ",Object(q.jsx)("span",{children:a.nombre})]})}var Z=n(22),$=n(41),ee=n.n($),te=n(42),ne=n.n(te),ae={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};ee.a.setAppElement("#root");var re=k()().minutes(0).seconds(0).add(1,"hours"),ce=re.clone().add(1,"hours"),oe={title:"",notes:"",start:re.toDate(),end:ce.toDate()},se=function(){var e=Object(H.useState)(re.toDate()),t=Object(K.a)(e,2),n=t[0],a=t[1],r=Object(H.useState)(ce.toDate()),o=Object(K.a)(r,2),s=o[0],l=o[1],b=Object(H.useState)(!0),d=Object(K.a)(b,2),p=d[0],O=d[1],v=Object(c.c)((function(e){return e.ui})).modalOpen,f=Object(c.c)((function(e){return e.calendar})).activeEvent,x=Object(H.useState)(oe),g=Object(K.a)(x,2),y=g[0],N=g[1],C=y.title,w=y.notes,S=y.start,E=y.end,T=Object(c.b)();Object(H.useEffect)((function(){if(f){N(f);var e=k()(f.start).seconds(0).toDate(),t=k()(f.end).seconds(0).toDate();a(e),l(t)}else N(oe)}),[f]);var A=function(){console.log("closeModal: "),T({type:_}),T(P()),N(oe),a(re.toDate()),l(ce.toDate())},L=function(e){var t=e.target;N(Object(j.a)(Object(j.a)({},y),{},Object(Z.a)({},t.name,t.value)))};return Object(q.jsxs)(ee.a,{isOpen:v,onRequestClose:A,style:ae,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo",children:[Object(q.jsxs)("h1",{children:[" ",f?"Editar Evento":"Nuevo Evento"," "]}),Object(q.jsx)("hr",{}),Object(q.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault();var t,n=k()(S),a=k()(E);return n.isSameOrAfter(a)?h("error",null,"Fecha fin debe ser mayor a fecha inicio"):C.trim()?(T(f?(t=y,function(){var e=Object(u.a)(i.a.mark((function e(n,a){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("events/".concat(t.id),t,"PUT");case 3:r=e.sent,c=r.ok,o=r.msg,c?n({type:I,payload:t}):h("error",null,o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("eventUpdateAction",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var r,c,o,s,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth,c=r.uid,o=r.nombre,t.prev=1,t.next=4,m("events/create",e,"POST");case 4:s=t.sent,l=Object(j.a)(Object(j.a)({id:s.evento.id},e),{},{usuario:{_id:c,nombre:o}}),s.ok&&n({type:D,payload:l}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("error en eventNewAction",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(y)),O(!0),void A()):O(!1)},children:[Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Fecha y hora inicio"}),Object(q.jsx)(ne.a,{className:"form-control",format:"y-MM-dd h:mm:ss a",amPmAriaLabel:"Select AM/PM",onChange:function(e){a(e);var t=k()(e).add(1,"hours");l(t.toDate()),N(Object(j.a)(Object(j.a)({},y),{},{start:e,end:t.toDate()}))},value:n})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Fecha y hora fin"}),Object(q.jsx)(ne.a,{className:"form-control",format:"y-MM-dd h:mm:ss a",amPmAriaLabel:"Select AM/PM",minDate:n,onChange:function(e){l(e),N(Object(j.a)(Object(j.a)({},y),{},{end:e}))},value:s})]}),Object(q.jsx)("hr",{}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Titulo"}),Object(q.jsx)("input",{type:"text",className:"form-control ".concat(!p&&"is-invalid"),placeholder:"Nombre del evento",name:"title",autoComplete:"off",value:C,onChange:L}),Object(q.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),Object(q.jsxs)("div",{className:"form-group",children:[Object(q.jsx)("label",{children:"Descripci\xf3n (Opcional)"}),Object(q.jsx)("textarea",{type:"text",className:"form-control",placeholder:"Notas",rows:"5",name:"notes",value:w,onChange:L}),Object(q.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Informaci\xf3n adicional"})]}),Object(q.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(q.jsx)("i",{className:"far fa-save"}),Object(q.jsx)("span",{children:" Guardar"})]})]})]})},le=function(){var e=Object(c.c)((function(e){return e.calendar})).activeEvent,t=Object(c.b)();return null===e?Object(q.jsx)("button",{className:"btn btn-primary fab",onClick:function(){t(G())},children:Object(q.jsx)("i",{className:"fas fa-plus"})}):Object(q.jsx)("button",{className:"btn btn-danger fab",onClick:function(){t(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n().calendar.activeEvent.id,e.next=4,m("events/".concat(a),{},"DELETE");case 4:r=e.sent,c=r.ok,o=r.msg,c?t({type:L}):h("error",null,o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error eventDeleteAction",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}())},children:Object(q.jsx)("i",{className:"fas fa-trash"})})};k.a.locale("es");var ie=Object(Q.b)(k.a),ue=function(){var e=Object(H.useState)(localStorage.getItem("lastView")||"month"),t=Object(K.a)(e,2),n=t[0],a=t[1],r=Object(c.b)(),o=Object(c.c)((function(e){return e.calendar})).events,s=Object(c.c)((function(e){return e.auth})).uid;Object(H.useEffect)((function(){r(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("events/",null,"GET");case 3:a=e.sent,r=a.ok,c=a.eventos,r&&(o=w(c),t({type:E,payload:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error en eventLoadAction",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}())}),[r]);return Object(q.jsxs)("div",{className:"calendar-screen",children:[Object(q.jsx)(W,{}),Object(q.jsx)(Q.a,{localizer:ie,events:o,startAccessor:"start",endAccessor:"end",messages:C,eventPropGetter:function(e,t,n,a){return{style:{backgroundColor:s===e.usuario._id?"#F70776":"#FDB44B",borderRadius:"0px",opacity:.8,display:"block",color:"white"}}},onDoubleClickEvent:function(e){console.log("doubleClick: "),r(G())},onSelectEvent:function(e){console.log("evento Seleccionado: "),r({type:T,payload:e})},onView:function(e){console.log("onViewChange: ",e),a(e),localStorage.setItem("lastView",e)},onSelectSlot:function(e){console.log("onSelectSlot: "),r(P())},selectable:!0,view:n,components:{event:Y}}),Object(q.jsx)(le,{}),Object(q.jsx)(se,{})]})},je=function(){return console.log("PrivateRoute"),Object(q.jsxs)(X.d,{children:[Object(q.jsx)(X.b,{path:"/calendar",element:Object(q.jsx)(ue,{})}),Object(q.jsx)(X.b,{path:"/*",element:Object(q.jsx)(X.a,{to:"/calendar"})})]})},be=function(){var e=Object(X.g)();return Object(q.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{className:"text-center text-danger",children:"404"}),Object(q.jsx)("h2",{className:"mb-4",children:"Ops! Page Not Found"}),Object(q.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){e("/login",{replace:!0})},children:"Ingresar"})]})})},de=(n(112),function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(H.useState)(e),n=Object(K.a)(t,2),a=n[0],r=n[1];return[a,function(e){var t=e.target;r(Object(j.a)(Object(j.a)({},a),{},Object(Z.a)({},t.name,t.value)))},function(){r(e)}]}({loginCorreo:"martinrole@hotmail.com",loginContrasena:"mar123",rNombre:"Tobby",rCorreo:"tobbias23@hotmail.com",rContrasena:"soyTobby1a",rContrasena2:"soyTobby1a"}),t=Object(K.a)(e,2),n=t[0],a=t[1],r=n.loginCorreo,o=n.loginContrasena,s=n.rNombre,l=n.rCorreo,b=n.rContrasena,m=n.rContrasena2,p=Object(c.b)();return Object(q.jsx)("div",{className:"container login-container",children:Object(q.jsxs)("div",{className:"row",children:[Object(q.jsxs)("div",{className:"col-md-6 login-form-1",children:[Object(q.jsx)("h3",{children:"Ingreso"}),Object(q.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),p((t=r,n=o,function(){var e=Object(u.a)(i.a.mark((function e(a,r){var c,o,s,l,u,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={correo:t,contrasena:n},e.next=3,d("auth",c,"POST");case 3:o=e.sent,s=o.uid,l=o.nombre,u=o.token,j=o.ok,b=o.msg,j?(localStorage.setItem("token",u),localStorage.setItem("token-init-date",(new Date).getTime()),a({type:x,payload:{uid:s,nombre:l}})):h("error",null,b);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},children:[Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"text",name:"loginCorreo",className:"form-control",placeholder:"Correo",value:r,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"password",name:"loginContrasena",className:"form-control",placeholder:"Contrase\xf1a",value:o,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"submit",className:"btnSubmit",value:"Ingresar"})})]})]}),Object(q.jsxs)("div",{className:"col-md-6 login-form-2",children:[Object(q.jsx)("h3",{children:"Registro"}),Object(q.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),b!==m)return h("error",null,"Contrase\xf1as no son iguales");var t,n,a;p((t=l,n=s,a=b,function(){var e=Object(u.a)(i.a.mark((function e(r,c){var o,s,l,u,j,b,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={correo:t,nombre:n,contrasena:a},e.next=3,d("auth/create",o,"POST");case 3:s=e.sent,l=s.uid,u=s.nombre,j=s.token,b=s.ok,m=s.msg,b?(localStorage.setItem("token",j),localStorage.setItem("token-init-date",(new Date).getTime()),r({type:x,payload:{uid:l,nombre:u}}),h("success","Bienvenido","Registro exitoso")):h("error",null,m);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},children:[Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"text",name:"rNombre",className:"form-control",placeholder:"Nombre",value:s,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"email",name:"rCorreo",className:"form-control",placeholder:"Correo",value:l,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"password",name:"rContrasena",className:"form-control",placeholder:"Contrase\xf1a",value:b,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"password",name:"rContrasena2",className:"form-control",placeholder:"Repita la contrase\xf1a",value:m,onChange:a})}),Object(q.jsx)("div",{className:"form-group",children:Object(q.jsx)("input",{type:"submit",className:"btnSubmit",value:"Crear cuenta"})})]})]})]})})}),me=function(){return console.log("PublicRoute"),Object(q.jsxs)(X.d,{children:[Object(q.jsx)(X.b,{path:"/login",element:Object(q.jsx)(de,{})}),Object(q.jsx)(X.b,{path:"/*",element:Object(q.jsx)(be,{})})]})},pe=function(){var e=Object(c.c)((function(e){return e.auth})),t=e.checking,n=e.uid,a=Object(c.b)();return Object(H.useEffect)((function(){a(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("auth/updateToken",null,"GET");case 2:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t({type:x,payload:{uid:a.uid,nombre:a.nombre}})):t({type:f});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[a]),t?Object(q.jsx)(z,{}):Object(q.jsx)(J.a,{children:Object(q.jsxs)(X.d,{children:[n&&Object(q.jsx)(X.b,{path:"/*",element:Object(q.jsx)(je,{})}),!n&&Object(q.jsx)(X.b,{path:"/*",element:Object(q.jsx)(me,{})})]})})},Oe=function(){return Object(q.jsx)(c.a,{store:B,children:Object(q.jsx)(pe,{})})};n(113);r.a.render(Object(q.jsx)(Oe,{}),document.getElementById("root"))}},[[115,1,2]]]);
//# sourceMappingURL=main.729c039d.chunk.js.map